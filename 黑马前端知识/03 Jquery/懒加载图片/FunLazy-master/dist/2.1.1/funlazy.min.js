/*!
 * FunLazy v2.1.1
 * Copyright (C) 2020, ZG
 * Released under the MIT license.
 */
!function(h,c){"function"===typeof define&&define.cmd?define(c):"undefined"!==typeof module&&"object"===typeof exports?module.exports=c(h):h.FunLazy=c(h)}("undefined"!==typeof window?window:this,function(h){function c(c,a){return g.defaultView.getComputedStyle(c,null).getPropertyValue(a)}function p(c,a,g){g?c.src=a:c.style.backgroundImage="url("+a+")"}function v(d){g.body.contains(d)&&"body"!==d.parentNode.nodeName.toLowerCase()&&(k=d.parentNode,"none"===c(k,"display")||"hidden"===c(k,"visibility")?n=!0:v(k));return n}var g=window.document,q=g.documentElement;h=g.head;var w="function"===typeof IntersectionObserver,A="function"===typeof MutationObserver,B={container:"body",effect:"show",placeholder:"data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAA1BMVEXd3d3u346CAAAADUlEQVR42gECAP3/AAAAAgABUyucMAAAAABJRU5ErkJggg\x3d\x3d",errorPlaceholder:"",threshold:0,width:null,height:null,axis:"y",eventType:"",autoCheckChange:!1,useErrorImagePlaceholder:!1,beforeLazy:function(){},onSuccess:function(){},onError:function(){}},l=g.getElementById("funlazy-fadeIn-style");l&&h.removeChild(l);h.insertAdjacentHTML("afterbegin",'\x3cstyle id\x3d"funlazy-fadeIn-style"\x3e\r\n.funlazy-fadeIn {\r\n-webkit-animation: funlazy-fadeIn 400ms ease 0s 1 normal forwards running;\r\n-moz-animation: funlazy-fadeIn 400ms ease 0s 1 normal forwards running;\r\nanimation: funlazy-fadeIn 400ms ease 0s 1 normal forwards running;\r\n}\r\n@-webkit-keyframes funlazy-fadeIn{\r\nfrom{opacity:0}\r\nto{opacity:1}\r\n}\r\n@-moz-keyframes funlazy-fadeIn {\r\nfrom{opacity:0}\r\nto{ opacity:1}\r\n}\r\n@keyframes funlazy-fadeIn {\r\nfrom{opacity:0}\r\nto{opacity:1}\r\n}\r\n\x3c/style\x3e');var n=!1,k=null,m=function(d){var a=function(a,c){var b={},e;for(e in c)b[e]=a[e]||c[e];return b}(d||{},B),h="function"===typeof a.beforeLazy,k="function"===typeof a.onSuccess,n="function"===typeof a.onError,f;if(a.container===window||a.container===g||"html"===a.container)a.container="body";"string"===typeof a.container&&(f=g.querySelector(a.container));if(f&&(d=f.querySelectorAll("[data-funlazy]"),d.length))return[].slice.call(d).forEach(function(b){function d(b,c){if(b.funlazyLoaded)c&&c(!0);else{var d=new Image;d.onload=function(){p(b,e,t);if("fadeIn"===a.effect&&"classList"in q){b.classList.add("funlazy-fadeIn");var d=window.setTimeout(function(){window.clearTimeout(d);b.classList.remove("funlazy-fadeIn")},400)}if(!b.funlazyLoaded&&k)a.onSuccess(b,e);b.funlazyLoaded=!0;c&&c(!0)};d.onerror=function(){"string"===typeof a.errorPlaceholder&&p(b,a.errorPlaceholder,t);if(!b.funlazyFailed&&n)a.onError(b,e);var d=a.useErrorImagePlaceholder;if(d&&(b.src="data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAA1BMVEXd3d3u346CAAAADUlEQVR42gECAP3/AAAAAgABUyucMAAAAABJRU5ErkJggg\x3d\x3d","string"===typeof d&&d.trim())){var f=new Image;f.src=d.trim();f.onload=function(){b.src=d.trim()}}b.funlazyFailed=!0;c&&c(!1)};h&&(e=a.beforeLazy(e)||e);d.src=e}}function r(){if(!b.funlazyLoaded)if(w){var e="number"===typeof a.threshold&&0<a.threshold?a.threshold:0,g=new IntersectionObserver(function(a){a.forEach(function(a){a.target&&a.isIntersecting&&d(a.target,function(b){!0===b&&g.unobserve(a.target)})})},{root:"body"===a.container?null:f,threshold:[0],rootMargin:"0px "+("x"===a.axis?e:0)+"px "+("y"===a.axis?e:0)+"px 0px"});g.observe(b)}else if(e=function(){try{var c=b.getBoundingClientRect();if("x"===a.axis){var e=window.pageXOffset;e<c.left+e+a.threshold+l&&q.clientWidth+e>c.left+e-a.threshold&&d(b)}if("y"===a.axis){var f=window.pageYOffset;f<c.top+f+a.threshold+m&&q.clientHeight+f>c.top+f-a.threshold&&d(b)}}catch(D){}},"body"===a.container)e();else if(f)if("fixed"===c(f,"position"))e();else try{if("x"===a.axis){var h=f.scrollLeft;h<b.offsetLeft+a.threshold+l&&parseInt(c(f,"width"))+h>b.offsetLeft-a.threshold&&d(b)}if("y"===a.axis){var k=f.scrollTop;k<b.offsetTop+a.threshold+m&&parseInt(c(f,"height"))+k>b.offsetTop-a.threshold&&d(b)}}catch(C){}}var e=b.getAttribute("data-funlazy").trim();if(e&&"none"!==c(b,"display")&&"hidden"!==c(b,"visibility")&&!v(b)&&0!==c(b,"opacity")&&!b.funlazyLoaded){var t="img"===b.nodeName.toLowerCase();"string"===typeof a.placeholder&&p(b,a.placeholder,t);a.width&&(b.style.width="string"===typeof a.width?a.width:a.width+"px");a.height&&(b.style.height="string"===typeof a.height?a.height:a.height+"px");var l=parseInt(c(b,"width")),m=parseInt(c(b,"height"));a.eventType.match(/(click|dblclick|mouseover)/)?g.addEventListener(a.eventType,function(a){a.target!==b||b.funlazyLoaded||b.funlazyFailed||d(b)}):r();if(!w&&!a.eventType){var x="body"===a.container?window:f,y=null,u=!1,z=function(){u||(u=!0,r(),y=window.setTimeout(function(){window.clearTimeout(y);u=!1;r()},200))};x.addEventListener("scroll",z);x.addEventListener("resize",z)}}}),a.autoCheckChange&&A&&(new MutationObserver(function(){m(a)})).observe(f,{childList:!0,subtree:!0}),a};return m});
